(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var c=n(17),o=n.n(c),r=n(18),a=n(8),i=n(3),s=n(2),u=n(5),l=n.n(u),d="/api/persons",j={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},add:function(e){return l.a.post(d,e).then((function(e){return e.data}))},deleteContact:function(e){return l.a.delete("".concat(d,"/").concat(e))},editContact:function(e){var t="".concat(d,"/").concat(e.id);return l.a.put(t,e)}},f=n(0),b=function(e){var t=e.persons,n=e.nameFilter,c=e.setPersons,o=e.setNotificationMessage,r=e.setErrorMessage;return console.log(t),t.filter((function(e){return e.name.toLowerCase().includes(n)})).map((function(e){return Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:[e.name," ",e.number]}),Object(f.jsx)("button",{onClick:function(){return n=e.id,a=e.name,void(window.confirm("Delete ".concat(a,"?"))&&j.deleteContact(n).then((function(){j.getAll().then((function(e){c(e)})),o("Deleted contact '".concat(a,"'")),setTimeout((function(){o(null)}),5e3)})).catch((function(){alert("The contact was already deleted on the server."),r("'".concat(a,"' was already deleted on the server")),setTimeout((function(){r(null)}),5e3),c(t.filter((function(e){return e.id!==n})))})));var n,a},children:"delete"})]},e.name)}))},h=function(e){var t=e.persons,n=e.setPersons,c=e.setNotificationMessage,o=e.setErrorMessage,u=Object(s.useState)(""),l=Object(i.a)(u,2),d=l[0],b=l[1],h=Object(s.useState)(""),O=Object(i.a)(h,2),m=O[0],p=O[1];return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var i=t.find((function(e){return e.name===d}));if(i){if(window.confirm("".concat(i.name," is already added to the phonebook, replace the old number with the new one?"))){var s=t.find((function(e){return e.id===i.id})),u=Object(a.a)(Object(a.a)({},s),{},{number:m});j.editContact(u).then((function(e){n(t.map((function(t){return t.id!==i.id?t:e.data})))})),c("Updated the phone number of '".concat(i.name,"'")),setTimeout((function(){c(null)}),5e3)}}else{var l={name:d,number:m};j.add(l).then((function(e){console.log(e),n([].concat(Object(r.a)(t),[e])),c("Added contact '".concat(d,"'")),setTimeout((function(){c(null)}),5e3)})).catch((function(e){o(e.response.data.error),setTimeout((function(){o(null)}),5e3)}))}b(""),p("")},children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:d,onChange:function(e){return b(e.target.value)}})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:m,onChange:function(e){return p(e.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.nameFilterValue,n=e.onNameFilterChanged;return Object(f.jsxs)("div",{children:["filter shown with: ",Object(f.jsx)("input",{value:t,onChange:n})]})},m=function(e){var t=e.notificationMessage,n=e.color;return null===t?null:Object(f.jsx)("div",{style:{border:"5px solid ".concat(n),borderRadius:"8px",backgroundColor:"lightgray",margin:"15px auto",fontSize:"20px",paddingLeft:"15px",color:n},children:Object(f.jsx)("p",{children:t})})},p=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)(null),r=Object(i.a)(o,2),a=r[0],u=r[1],l=Object(s.useState)(null),d=Object(i.a)(l,2),p=d[0],g=d[1];Object(s.useEffect)((function(){j.getAll().then((function(e){console.log(e),c(e)}))}),[]);var v=Object(s.useState)(""),x=Object(i.a)(v,2),w=x[0],C=x[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(m,{notificationMessage:a,color:"green"}),Object(f.jsx)(m,{notificationMessage:p,color:"red"}),Object(f.jsx)(O,{nameFilterValue:w,onNameFilterChanged:function(e){return C(e.target.value)}}),Object(f.jsx)("h3",{children:"Add a new contact"}),Object(f.jsx)(h,{persons:n,setPersons:c,setNotificationMessage:u,setErrorMessage:g}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(b,{persons:n,nameFilter:w,setPersons:c,setErrorMessage:g,setNotificationMessage:u})]})};o.a.render(Object(f.jsx)(p,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.12ea04d4.chunk.js.map