(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var c=n(17),o=n.n(c),a=n(18),r=n(8),i=n(3),s=n(2),u=n(5),l=n.n(u),d="http://localhost:3001/api/persons",j={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},add:function(e){return l.a.post(d,e).then((function(e){return e.data}))},deleteContact:function(e){return l.a.delete("".concat(d,"/").concat(e))},editContact:function(e){var t="".concat(d,"/").concat(e.id);return l.a.put(t,e)}},b=n(0),f=function(e){var t=e.persons,n=e.nameFilter,c=e.setPersons,o=e.setNotificationMessage,a=e.setErrorMessage;return console.log(t),t.filter((function(e){return e.name.toLowerCase().includes(n)})).map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:[e.name," ",e.number]}),Object(b.jsx)("button",{onClick:function(){return n=e.id,r=e.name,void(window.confirm("Delete ".concat(r,"?"))&&j.deleteContact(n).then((function(){j.getAll().then((function(e){c(e)})),o("Deleted contact '".concat(r,"'")),setTimeout((function(){o(null)}),5e3)})).catch((function(){alert("The contact was already deleted on the server."),a("'".concat(r,"' was already deleted on the server")),setTimeout((function(){a(null)}),5e3),c(t.filter((function(e){return e.id!==n})))})));var n,r},children:"delete"})]},e.name)}))},h=function(e){var t=e.persons,n=e.setPersons,c=e.setNotificationMessage,o=Object(s.useState)(""),u=Object(i.a)(o,2),l=u[0],d=u[1],f=Object(s.useState)(""),h=Object(i.a)(f,2),O=h[0],m=h[1];return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o=t.find((function(e){return e.name===l}));if(o){if(window.confirm("".concat(o.name," is already added to the phonebook, replace the old number with the new one?"))){var i=t.find((function(e){return e.id===o.id})),s=Object(r.a)(Object(r.a)({},i),{},{number:O});j.editContact(s).then((function(e){n(t.map((function(t){return t.id!==o.id?t:e.data})))})),c("Updated the phone number of '".concat(o.name,"'")),setTimeout((function(){c(null)}),5e3)}}else{var u={name:l,number:O};j.add(u).then((function(e){console.log(e),n([].concat(Object(a.a)(t),[e]))})),c("Added contact '".concat(l,"'")),setTimeout((function(){c(null)}),5e3)}d(""),m("")},children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:l,onChange:function(e){return d(e.target.value)}})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:O,onChange:function(e){return m(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.nameFilterValue,n=e.onNameFilterChanged;return Object(b.jsxs)("div",{children:["filter shown with: ",Object(b.jsx)("input",{value:t,onChange:n})]})},m=function(e){var t=e.notificationMessage,n=e.color;return null===t?null:Object(b.jsx)("div",{style:{border:"5px solid ".concat(n),borderRadius:"8px",backgroundColor:"lightgray",margin:"15px auto",fontSize:"20px",paddingLeft:"15px",color:n},children:Object(b.jsx)("p",{children:t})})},p=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)(null),a=Object(i.a)(o,2),r=a[0],u=a[1],l=Object(s.useState)(null),d=Object(i.a)(l,2),p=d[0],g=d[1];Object(s.useEffect)((function(){j.getAll().then((function(e){console.log(e),c(e)}))}),[]);var v=Object(s.useState)(""),x=Object(i.a)(v,2),w=x[0],C=x[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(m,{notificationMessage:r,color:"green"}),Object(b.jsx)(m,{notificationMessage:p,color:"red"}),Object(b.jsx)(O,{nameFilterValue:w,onNameFilterChanged:function(e){return C(e.target.value)}}),Object(b.jsx)("h3",{children:"Add a new contact"}),Object(b.jsx)(h,{persons:n,setPersons:c,setNotificationMessage:u}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(f,{persons:n,nameFilter:w,setPersons:c,setErrorMessage:g,setNotificationMessage:u})]})};o.a.render(Object(b.jsx)(p,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e91a9807.chunk.js.map